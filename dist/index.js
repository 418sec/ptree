let $p=require("../src/");function compare(a,b){console.log(a===b?"Test passed.":`${a} differed from expected value: ${b}`)}function compareArrays(a,b){const c=a.length==b.length;console.log(c&&a.every((a,c)=>a===b[c])?"Test passed.":`Array ${a} differed from expected array ${b}`)}compare(new $p([1,2,3,4]).get("0"),1),compare(new $p({value:3}).get("value"),3),compare(new $p({values:["1","2"]}).get("values.0"),"1");const obj={a:2,b:3};compare(new $p(obj).get(""),obj),compare(new $p(5).get(""),5),compare(new $p(obj).get("a.thisdoesnotexist"),void 0),compare(new $p([[1,2,3],[4,5,6]]).get("0.0"),1);const obj2={a:{c:2,d:3},b:{e:[4,5,6,7]}};compare(new $p(obj2).get(["a","c"]),2),compare(new $p(obj2).get(["b","e",()=>Math.max(0,1)]),5),compare(new $p(obj2).get(["b","e","0"]),4),compare(new $p(obj2).get(["b","e",2]),6),compareArrays(new $p(obj).keys(),["a","b"]),compareArrays(new $p([1,2,3,4,5]).keys(),["0","1","2","3","4"]),compareArrays(new $p([[0,1],2,3,4,5]).keys(),["0.0","0.1","1","2","3","4"]),compareArrays(new $p({a:0,b:1,c:2}).keys(),["a","b","c"]),compareArrays(new $p(obj2).keys(),["a.c","a.d","b.e.0","b.e.1","b.e.2","b.e.3"]),compareArrays(new $p(obj2).keys().map(a=>new $p(obj2).get(a)),[2,3,4,5,6,7]);let obj3={a:2};compare(new $p(obj3).get("a"),2),new $p(obj3).set("a",3),compare(new $p(obj3).get("a"),3);let obj4={a:{a:1,b:2}};compare(new $p(obj4).get("a.a"),1),new $p(obj4).set("a.a",3),compare(new $p(obj4).get("a.a"),3);let obj5=[1,2,3,4,5];compare(new $p(obj5).get("0"),1),new $p(obj5).set("0",10),compare(new $p(obj5).get("0"),10);let obj6=[{name:"Robert",age:30}];compare(new $p(obj6).get("0.name"),"Robert"),new $p(obj6).set("0.name","James"),compare(new $p(obj6).get(["0","name"]),"James"),new $p(obj6).set("",23434),compare(new $p(obj6).get(["0","name"]),"James"),compare(new $p(obj6).get(["0","age"]),30);let obj7={a:1,b:2,c:3,d:[4,5,6,[7,8,9]]};compareArrays(new $p(obj7).keys(),["a","b","c","d.0","d.1","d.2","d.3.0","d.3.1","d.3.2"]),compareArrays(new $p(obj7).values(),[1,2,3,4,5,6,7,8,9]),compareArrays(new $p(obj7).filterKeys(a=>5<a),["d.2","d.3.0","d.3.1","d.3.2"]);let objToFlatten={a:1,b:{c:2,d:3},d:[4,5,6,7]},flatObj=new $p(objToFlatten).flatten();compare(new $p(flatObj).get("d.3"),7),compare(new $p([1,2,3,4]).equal(void 0),!1),compare(new $p([1,2,3,4]).equal("5"),!1),compare(new $p([1,2,3,4]).equal([1,2,3,4]),!0),compare(new $p([1,2,3]).equal([1,2,3,4]),!1),compare(new $p([4,3,2,1]).equal([1,2,3,4]),!1),compare(new $p([1,2,3,4]).equal(obj),!1),compare(new $p([1,2,3,4]).equal({}),!1);let obj8={a:{b:2,c:3},d:[1,2,3,4]};compare(new $p(obj8).equal({}),!1),compare(new $p(obj8).equal([{a:{b:2,c:3},d:[1,2,3,4]}]),!1),compare(new $p(obj8).equal({a:{b:2,d:3},d:[1,2,3,4]}),!1),compare(new $p(obj8).equal({a:{b:2,c:4},d:[1,2,3,4]}),!1),compare(new $p(obj8).equal({a:{b:2,c:3},d:[1,2,3,4]}),!0);let obj9={};compare(new $p(obj9).get("a"),void 0),new $p(obj9).set("a",5),compare(new $p(obj9).get("a"),5),compare(new $p(obj9).get("b.c"),void 0),new $p(obj9).set("b.c",5),compare(new $p(obj9).get("b.c"),5);let array=[];compare(new $p(array).get("1"),void 0),new $p(array).set("1",5),compare(new $p(array).get("1"),5),compare(new $p(array).get("0.a"),void 0),new $p(array).set("0.a",5),compare(new $p(array).get("0.a"),5),compare(new $p(array).get("5.1"),void 0),new $p(array).set("5.1",5),compare(new $p(array).get("5.1"),5);let obj10={a:2,b:3,c:[0,10,0,0]};compare(new $p(obj10).findKey(a=>10==a),"c.1");let obj11={a:2,b:"string",c:{d:[1,2,3,4],e:{f:2}}};compare(new $p(obj11).validate([{path:"a"},{path:"b"},{path:"c"}]),!0),compare(new $p(obj11).validate([{path:"a"},{path:"b"},{path:"f.d.e",optional:!0,rules:[a=>47==a]}]),!0),compare(new $p(obj11).validate([{path:"a",rules:[a=>2==a]},{path:"b",rules:[a=>"string"==typeof a,a=>0<a.length]}]),!0),compare(new $p(obj11).validate([{path:"a",rules:[a=>2==a]},{path:"b",rules:[a=>"string"==typeof a,a=>10<a.length]}]),!1),compare(new $p(obj11).validate([{path:"a",rules:[a=>2==a]},{path:"c.d",rules:[a=>4==a.length]}]),!0),compare(new $p(obj11).validate([{path:"c.e.f",rules:[a=>10<a]},{path:"c.d",rules:[a=>4==a.length]}]),!1);let obj12={a:2,b:3,c:4,d:5};compare(new $p(obj12).validate([{path:"*",rules:[a=>10>a]}]),!0),compare(new $p(obj12).validate([{path:"*",rules:[a=>5<a]}]),!1),compare(new $p([]).validate([{path:"*",optional:!0,rules:[a=>5<a]}]),!0),compare(new $p([4,3,7]).validate([{path:"*",optional:!0,rules:[a=>5<a]}]),!1),compare(new $p([7,8,9]).validate([{path:"*",optional:!0,rules:[a=>5<a]}]),!0),compare(new $p([1,2,3,4]).validate([{path:"*",rules:[a=>4>a]}]),!1),compare(new $p([1,2,3,4]).get([1]),2);